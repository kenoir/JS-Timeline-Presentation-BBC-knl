<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
		<meta name="viewport" content="width=1024, user-scalable=no">

		<title>Embedded Timeline Presentation</title>

		<!-- Required stylesheet -->
		<link rel="stylesheet" href="core/deck.core.css">

		<!-- Extension CSS files go here. Remove or add as needed. -->
		<link rel="stylesheet" href="extensions/goto/deck.goto.css">
		<link rel="stylesheet" href="extensions/menu/deck.menu.css">
		<link rel="stylesheet" href="extensions/navigation/deck.navigation.css">
		<link rel="stylesheet" href="extensions/status/deck.status.css">
		<link rel="stylesheet" href="extensions/hash/deck.hash.css">
		<link rel="stylesheet" href="extensions/scale/deck.scale.css">

		<!-- Web fonts -->
		<link href='http://fonts.googleapis.com/css?family=Capriola' rel='stylesheet' type='text/css'>

		<!-- Style theme. More available in /themes/style/ or create your own. -->
		<link rel="stylesheet" href="themes/style/web-2.0.css">
		<link rel="stylesheet" href="themes/style/timeline.css">

		<!-- Transition theme. More available in /themes/transition/ or create your own. -->
		<link rel="stylesheet" href="themes/transition/horizontal-slide.css">

		<!-- Code formatting -->
		<link href="assets/google-code-prettify/prettify.css" type="text/css" rel="stylesheet" />
		<script type="text/javascript" src="assets/google-code-prettify/prettify.js"></script>

		<!-- Required Modernizr file -->
		<script src="modernizr.custom.js"></script>
		<script src="local_resources/swfobject.js"></script>
	</head>
	<body class="deck-container timeline">

		<!-- Begin slides. Just make elements with a class of slide. -->

		<section class="slide wider">
		<h1>Embedded Timeline</h1>
		<iframe src="http://www.test.newsonline.tc.nca.bbc.co.uk/history/0/16435733"></iframe>
		</section>
		
		<!-- Quick Overview -->
		<section class="slide insterstitial">
		<h1>Overview</h1>
		</section>

		<section class="slide">
		<h1>BDD and best intentions</h1>
		<ul>
		  <li>Requires a protagonist to make use of BDD in the first place</li>
		  <li>Intention was to provide a specification starting point to iterate from
		    <blockquote>figuring out what the hell you are supposed to be building in the first place – I think that’s half the benefit</blockquote>
		  </li>
		  <li>Stakeholders: Tom(s) from UX, Leo (PM) and developers (Kenny and Claudio)</li>
		  <li>No BA - is that bad?</li>
		</ul>
		</section>

		<section class="slide">
		<h1>Technical Architecture</h1>
		<div class="image-cradle">
			<img src="local_resources/architecture.png" width="800"/>	
		</div>
		</section>

		<!-- The Build -->
		<section class="slide insterstitial">
		<h1>The Build</h1>
		</section>


		<section class="slide">
		<h1>The Prototype</h1>
		<div id="flashtimeline">
			<div id="flashcontent"><embed type="application/x-shockwave-flash" src="local_resources/new_scrub_08.swf" width="624" height="362" id="mymovie" name="mymovie" bgcolor="#ffffff" quality="high" menu="false"></div>
			<script type="text/javascript">
				var so = new SWFObject("local_resources/new_scrub_08.swf", "mymovie", "624", "362", "10", "#ffffff");
				so.write("flashcontent");
				so.addParam("menu", "false");
				so.write("flashcontent");
			</script>

		</div>
		</section>

		<section class="slide">
		<h1>Relish</h1>
		<iframe src="https://www.relishapp.com/bbc-knowlearn/history-embedded-timeline/docs/?token=xIfwm1VSMWomykv288EV"></iframe>
		</section>

		<section class="slide">
		<h1>Running Cukes</h1>
		<iframe src="local_resources/cukes.html"></iframe>
		</section>

		<section class="slide">
		<h1>Jasmine Tests</h1>
		<iframe src="local_resources/timeline/specs/kltimeline.html"></iframe>
		</section>

		<section class="slide wider">
		<h1>PHPUnit Tests Report</h1>
		<iframe src="local_resources/phpunit.html"></iframe>
		</section>

		<section class="slide wider">
		<h1>PHPUnit Tests Coverage</h1>
		<iframe src="local_resources/unit_test_coverage/index.html"></iframe>
		</section>
		
		<section class="slide wider">
		<h1>TDD Approach</h1>
		<ul>
		    <li>Testing strategy</li>
		</ul>
		</section>

		<section class="slide">
		<h1>Rake Tasks</h1>
<pre class="prettyprint">
> rake --tasks
rake buildjs                 # Optimize Javascript
rake ci:features             # Run Cukes in CI
rake features                # Run Cukes against localhost:4567 (Sinatra)
rake focus:features          # Run Cukes tagged @now against localhost:4567 (Sinatra)
rake int:features            # Run Cukes against INT
rake jasmine                 # Run specs via server
rake jasmine:ci              # Run continuous integration tests
rake phpunit                 # Run PHPUnit Tests
rake sandbox:features        # Run Cukes against Sandbox
rake sandbox:focus:features  # Run Cukes tagged @now against Sandbox
</pre>
		</section>

		

		<!-- JS Widget -->
		<section class="slide insterstitial">
		<h1>The JS Widget</h1>
		</section>


		<section class="slide narrower">
		<h1>Escaping the Sandbox</h1>
		<iframe src="local_resources/timeline/index.html"></iframe>
		</section>

		<section class="slide">
		<h1>This isn't a Carousel!</h1>
		<ul>
			<li>Firstly it doesn't go round.</li>
			<li>Parses the DOM for CSS selectors & creates data model</li>
			<li>Has an internal representation of state not held in the DOM</li>
			<li>Generates a view based on Mustache templates </li>
			<li>Built for flexibility so that Timeline 2.0 <del>can be</del> could have been built quickly!</li>
		</ul>
		</section>

		<section class="slide">
		<h1>JavaScript Libraries</h1>
		<ul>
			<li>Require.js: <a href="http://requirejs.org/">http://requirejs.org/</a></li>
			<li>Mustache: <a href="http://mustache.github.com/">http://mustache.github.com/</a></li>
			<li>ICanHaz: <a href="https://github.com/andyet/ICanHaz.js">https://github.com/andyet/ICanHaz.js </a>&nbsp;<a href="https://github.com/kenoir/ICanHaz.js">(Forked!)</a></li>
			<li>JQuery: <a href="http://jquery.com/">http://jquery.com/</a></li>
			<li><del>JQueryUI: <a href="http://jqueryui.com/">http://jqueryui.com</del></a></li>
			<li>drgbl.js <a href="https://github.com/kenoir/drgbl.js">https://github.com/kenoir/drgbl.js</a></li>
			<li>EventEmitter <a href="https://github.com/Wolfy87/EventEmitter/">https://github.com/Wolfy87/EventEmitter/</a></li>
			<li>Modernizr <a href="http://modernizr.com/">http://modernizr.com/</a></li>
		</ul>
		</section>

		<section class="slide narrower">
		<h1>Why not JQueryUI?</h1>
		<iframe src="local_resources/drgbl/index.html"></iframe>
		</section>

		<section class="slide">
		<h1>Responsive design & animation</h1>
		<div class="fancy-transform">

<pre class="prettyprint">
<code class="language-css">
/* We use Modernizr to check whether transform is
   available in the browser and apply a JavaScript
   animation if it's not ... */

.timeline .fancy-transform:hover {
     background-color:cyan;
     top:200px;
     
      -webkit-transform: scale(1.5,1.5) rotate( 20deg );
      -webkit-transition-duration: 0.5s;
}

/* But we can't be sure that this code will behave
   the same way in different versions of WebKit! */
</code>
</pre>
		</div>

		</section>

		<section class="slide">
		<h1>Stuff i've learnt</h1>
		<ul>
			<li><a href="http://pivotal.github.com/jasmine/">Jasmine</a> is awesome.</li>
			<li>It might have been OK to throw away JQuery.</li>
			<li>A JavaScript MVC framework might have helped.</li> 
			<li>CSS3 rendering engines are not to be trusted.</li>
			<li>Making asynchronous requests between www & static doesn't work. <br/> See:
				<a href="http://www.w3.org/TR/cors/">
					<ABBR TITLE="Cross Origin Request Sharing">CORS</ABBR>
				</a>
			</li>
			<li>'Responsive design' means 'lots and lots of work for web developers'.</li>
			<li>Testing JavaScript in (our) CI environment is hard.</li>
		</ul>
		</section>

		<!-- The PAL Application -->
		<section class="slide insterstitial">
		<h1>The PAL App</h1>
		</section>
		
		<section class="slide">
		<h1>The PAL App Structure</h1>
	    <iframe src="local_resources/phpdocs/index.html"></iframe>
		</section>

		<!-- The PAL Application -->
		<section class="slide insterstitial">
		<h1>Monitoring, Logging &amp; Caching</h1>
		</section>
	
		<section class="slide">
		<h1>Zenoss Monitoring</h2>
		<iframe src="https://monitor.forge.bbc.co.uk/zport/dmd/Reports/Multi-Graph%20Reports/BBC%20Applications/kltimeline/kltimeline_Int#graph_3:True;"></iframe>
		<!--
			<div class="image-cradle">
				<h2>Zenoss</h2>
				<img src="local_resources/zenoss.png" width="800"/>	
			</div>
			<ul style="top: 20px;">
				<li>Thing that we are monitoring in Zenoss</li>
				<li>...</li>
			</ul>
		</div>
		-->
		</section>
		
		<article class="slide wider" id="monitoring">
			<h1>What we monitor</h1>
			<section>
				<ul style="top: 20px;">
					<li>Service errors</li>
					<li>Unexistent Timeline resource</li>
					<li>Invalid Timeline Json feed</li>
				</ul>
			</section>
			<section>
				<pre class="prettyprint"><code>; monitoring
						kltimeline.monitoring.error404.thresholds.maxThreshW = 3
						kltimeline.monitoring.error404.thresholds.maxThreshI = 1.5
						kltimeline.monitoring.error404.thresholds.maxThreshD = 0.3
						
						<div class="highlightable">
						kltimeline.monitoring.error500.thresholds.maxThreshW = 3
						kltimeline.monitoring.error500.thresholds.maxThreshI = 1.5
						kltimeline.monitoring.error500.thresholds.maxThreshD = 0.3
						</div>
						kltimeline.monitoring.error503.thresholds.maxThreshW = 3
						kltimeline.monitoring.error503.thresholds.maxThreshI = 1.5
						kltimeline.monitoring.error503.thresholds.maxThreshD = 0.3
						
						kltimeline.monitoring.errorServiceInvalidData.thresholds.maxThreshW = 3
						kltimeline.monitoring.errorServiceInvalidData.thresholds.maxThreshI = 1.5
						kltimeline.monitoring.errorServiceInvalidData.thresholds.maxThreshD = 0.3		
				    </code>
				</pre>
			</section>
		</article>		
		
		<section class="slide">
		<h1>Logging</h1>
		<p></p>
		</div>
		</section>
		
		<section class="slide">
		<h1>Logging errors to console</h1>
		</div>
		</section>
		
		
		<section class="slide">
		<h1>Logging actions with iStats</h1>
<pre class="prettyprint">
<code class="language-javascript">
dragend: function(){
  var logData = { 
    'eventResourceURL' : 
      carousel.focussedEvent().timelineEvent.resourceURL 
  };

  Stats.log('dragged.timeline.kltimeline',logData);
}
</code>
</pre>
		<div class="quicknote">
			<p><a href="http://www.bbc.co.uk/frameworks/istats/guides/logging-actions">http://www.bbc.co.uk/frameworks/istats/guides/logging-actions</a></p>
		</div>
		</section>

		<section class="slide">
		<h1>Caching</h1>
		<h2>mod_cache on the News Stack</h2>
		<div class="quicknote">
			<p><a href="https://confluence.dev.bbc.co.uk/display/frameworks/Sharing+PAL+Content+with+News+Stack">https://confluence.dev.bbc.co.uk/display/frameworks/Sharing+PAL+Content+with+News+Stack</a></p>

		</div>
		</section>
		<!-- End slides. -->

		<!-- Begin extension snippets. Add or remove as needed. -->

		<!-- deck.navigation snippet -->
		<a href="#" class="deck-prev-link" title="Previous">&#8592;</a>
		<a href="#" class="deck-next-link" title="Next">&#8594;</a>

		<!-- deck.status snippet -->
		<p class="deck-status">
		<span onclick="$.deck('toggleMenu');">&#21512;</span>
		<span class="deck-status-current"></span>
		/
		<span class="deck-status-total"></span>
		</p>

		<!-- deck.goto snippet -->
		<form action="." method="get" class="goto-form">
			<label for="goto-slide">Go to slide:</label>
			<input type="text" name="slidenum" id="goto-slide" list="goto-datalist">
			<datalist id="goto-datalist"></datalist>
			<input type="submit" value="Go">
		</form>

		<!-- deck.hash snippet -->
		<a href="." title="Permalink to this slide" class="deck-permalink">#</a>

		<!-- End extension snippets. -->


		<!-- Required JS files. -->
		<script src="jquery-1.7.2.min.js"></script>
		<script src="core/deck.core.js"></script>

		<!-- Extension JS files. Add or remove as needed. -->
		<script src="core/deck.core.js"></script>
		<script src="extensions/hash/deck.hash.js"></script>
		<script src="extensions/menu/deck.menu.js"></script>
		<script src="extensions/goto/deck.goto.js"></script>
		<script src="extensions/status/deck.status.js"></script>
		<script src="extensions/navigation/deck.navigation.js"></script>

		<!-- Initialize the deck. You can put this in an external file if desired. -->
		<script>
			$(function() {
				$.deck('.slide');
				prettyPrint();
			});
		</script>
	</body>
</html>
